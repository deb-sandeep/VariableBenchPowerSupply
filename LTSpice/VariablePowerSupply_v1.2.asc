Version 4
SHEET 1 2544 836
WIRE 1360 -96 -320 -96
WIRE -80 -32 -432 -32
WIRE -16 -32 -80 -32
WIRE 416 -32 -16 -32
WIRE 560 -32 416 -32
WIRE 704 -32 560 -32
WIRE 1104 -32 704 -32
WIRE 1552 -32 1104 -32
WIRE 1776 -32 1552 -32
WIRE 496 -16 352 -16
WIRE 640 -16 496 -16
WIRE 416 0 416 -32
WIRE 560 0 560 -32
WIRE 704 0 704 -32
WIRE -80 16 -80 -32
WIRE -16 16 -16 -32
WIRE 2000 16 896 16
WIRE 352 48 352 -16
WIRE 352 48 112 48
WIRE 496 48 496 -16
WIRE 640 48 640 -16
WIRE 1360 80 1360 -96
WIRE 128 96 112 96
WIRE 272 96 208 96
WIRE -320 112 -320 -96
WIRE -112 112 -320 112
WIRE 416 112 416 96
WIRE 560 112 560 96
WIRE 704 112 704 96
WIRE 896 112 896 16
WIRE 928 112 896 112
WIRE 1040 112 1008 112
WIRE 1136 112 1040 112
WIRE 1232 112 1216 112
WIRE -432 128 -432 -32
WIRE 1488 128 1408 128
WIRE 240 144 112 144
WIRE 2000 144 2000 16
WIRE 1104 160 1104 -32
WIRE 1552 160 1552 -32
WIRE 1776 160 1776 -32
WIRE 896 176 896 112
WIRE 1040 176 1040 112
WIRE 1072 176 1040 176
WIRE 1488 176 1488 128
WIRE 1520 176 1488 176
WIRE 1744 176 1712 176
WIRE 160 192 112 192
WIRE 304 192 160 192
WIRE 560 192 416 192
WIRE 704 192 560 192
WIRE 1232 192 1232 112
WIRE 1232 192 1136 192
WIRE 1648 192 1584 192
WIRE 1872 192 1808 192
WIRE 1072 208 1040 208
WIRE 1232 208 1232 192
WIRE 1520 208 1232 208
WIRE 1648 208 1648 192
WIRE 1744 208 1648 208
WIRE 160 224 160 192
WIRE -112 240 -144 240
WIRE 1872 240 1872 192
WIRE -320 256 -320 112
WIRE 416 272 416 192
WIRE 160 288 112 288
WIRE 560 288 560 192
WIRE 896 288 896 256
WIRE 896 288 560 288
WIRE 928 288 896 288
WIRE 1040 288 1040 208
WIRE 1040 288 1008 288
WIRE 1136 288 1040 288
WIRE 1232 288 1216 288
WIRE -240 304 -272 304
WIRE -208 304 -240 304
WIRE -144 304 -144 240
WIRE -144 304 -208 304
WIRE 304 304 304 192
WIRE 368 304 304 304
WIRE -240 368 -240 304
WIRE 1872 368 1872 320
WIRE 272 400 272 96
WIRE 1648 400 1648 208
WIRE 1648 400 272 400
WIRE -432 464 -432 208
WIRE -320 464 -320 336
WIRE -320 464 -432 464
WIRE -240 464 -240 432
WIRE -240 464 -320 464
WIRE -32 464 -32 336
WIRE -32 464 -240 464
WIRE 240 464 240 144
WIRE 240 464 -32 464
WIRE 416 464 416 352
WIRE 416 464 240 464
WIRE 1104 464 1104 224
WIRE 1104 464 416 464
WIRE 1232 464 1232 288
WIRE 1232 464 1104 464
WIRE 1360 464 1360 160
WIRE 1360 464 1232 464
WIRE 1552 464 1552 224
WIRE 1552 464 1360 464
WIRE 1712 464 1712 176
WIRE 1712 464 1552 464
WIRE 1776 464 1776 224
WIRE 1776 464 1712 464
WIRE 1872 464 1872 432
WIRE 1872 464 1776 464
WIRE 2000 464 2000 224
WIRE 2000 464 1872 464
WIRE -32 480 -32 464
FLAG -32 480 0
FLAG 160 192 V_inv
FLAG 2000 16 V_out
IOPIN 2000 16 Out
FLAG -208 304 NInv
SYMBOL LM723 -32 80 R0
SYMATTR InstName U1
SYMBOL voltage -432 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 20
SYMBOL npn 352 0 R0
SYMATTR InstName Q2
SYMATTR Value 2N3055
SYMBOL npn 496 0 R0
SYMATTR InstName Q3
SYMATTR Value 2N3055
SYMBOL npn 640 0 R0
SYMATTR InstName Q4
SYMATTR Value 2N3055
SYMBOL res 400 96 R0
SYMATTR InstName R2
SYMATTR Value 0.1
SYMBOL res 544 96 R0
SYMATTR InstName R3
SYMATTR Value 0.1
SYMBOL res 688 96 R0
SYMATTR InstName R4
SYMATTR Value 0.1
SYMBOL cap 144 224 R0
WINDOW 3 26 47 Left 2
SYMATTR Value 100p
SYMATTR InstName C1
SYMBOL Opamps/opamp2 1104 128 R0
WINDOW 0 -20 64 Left 2
WINDOW 3 30 81 Left 2
SYMATTR InstName U2
SYMATTR Value LM324
SYMBOL res 912 272 R180
WINDOW 0 -90 79 Left 2
WINDOW 3 -21 49 Left 2
SYMATTR InstName R_sense
SYMATTR Value .1
SYMBOL res 1024 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {R_a}
SYMBOL res 1024 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {R_a}
SYMBOL res 1120 304 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R9
SYMATTR Value {R_b}
SYMBOL res 1120 128 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value {R_b}
SYMBOL res 1984 128 R0
SYMATTR InstName R_load
SYMATTR Value 5
SYMBOL Opamps/opamp2 1552 128 R0
WINDOW 0 -22 65 Left 2
WINDOW 3 17 25 Left 2
SYMATTR InstName U3
SYMATTR Value LM324
SYMBOL res 224 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100E
SYMBOL Opamps/opamp2 1776 128 R0
SYMATTR InstName U4
SYMATTR Value LM324
SYMBOL res 1856 224 R0
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL LED 1856 368 R0
SYMATTR InstName D1
SYMBOL potentiometer -336 240 R0
SYMATTR InstName U5
SYMATTR Value Rtot=100k wiper=0.99
SYMBOL cap -256 368 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL potentiometer 432 368 R180
SYMATTR InstName U6
SYMATTR Value Rtot=20k wiper=0.65
SYMBOL potentiometer 1344 64 R0
SYMATTR InstName U7
SYMATTR Value Rtot=100k wiper=0.33
TEXT -264 520 Left 2 !.lib TIP122.lib\n.lib LM324.ti.lib
TEXT 368 512 Left 2 !.param R_a 10k\n.param R_b=200k
TEXT 24 552 Left 2 !.inc ilim.sub
TEXT 24 520 Left 2 !.inc potentiometer.sub
TEXT -416 512 Left 2 !.tran 1s
LINE Normal 336 496 336 -48 2
LINE Normal 816 496 816 -48 2
LINE Normal 1296 496 1296 -48 2
LINE Normal 1680 496 1680 -48 2
LINE Normal 1952 496 1952 -48 2
